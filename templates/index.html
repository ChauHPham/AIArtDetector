<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Art Detector</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 300;
        }

        .subtitle {
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .upload-area {
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 60px 20px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .upload-area:hover {
            border-color: #667eea;
            background-color: #f8f9ff;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background-color: #f0f2ff;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3em;
            color: #ddd;
            margin-bottom: 20px;
        }

        .upload-text {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #999;
            font-size: 0.9em;
        }

        #fileInput {
            display: none;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            margin: 20px 0;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result {
            display: none;
            margin-top: 30px;
            padding: 30px;
            background: #f8f9ff;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .prediction {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .confidence {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .probabilities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .prob-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .prob-label {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .prob-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .prob-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .prob-value {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .preview-image {
            max-width: 300px;
            max-height: 300px;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .preview-container {
            margin: 20px 0;
            display: none;
        }

        .preview-container.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #d63031;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 3.7s;
            min-width: 250px;
        }

        .notification.show {
            display: block;
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification-icon {
            font-size: 1.5em;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        .ai-result { color: #e17055; }
        .human-result { color: #00b894; }

        .disclaimer {
            margin-top: 40px;
            padding: 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 5px;
            font-size: 0.85em;
            color: #856404;
            line-height: 1.5;
        }

        .disclaimer strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® AI Art Detector</h1>
        <p class="subtitle">Upload an image to detect if it's AI-generated or Human-made</p>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">üìÅ</div>
            <div class="upload-text">Drop your image here or click to browse</div>
            <div class="upload-hint">Supports JPG, PNG, GIF formats</div>
            <input type="file" id="fileInput" accept="image/*">
        </div>
        
        <div class="preview-container" id="previewContainer">
            <img id="previewImage" class="preview-image">
        </div>
        
        <button class="btn" id="analyzeBtn" disabled>Analyze Image</button>
        <button class="btn" id="clearBtn" style="display: none;">Clear</button>
        
        <div class="notification" id="notification">
            <div class="notification-content">
                <span class="notification-icon">‚úì</span>
                <span>Successfully uploaded!</span>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Analyzing image...</p>
        </div>
        
        <div class="result" id="result">
            <div id="prediction" class="prediction"></div>
            <div id="confidence" class="confidence"></div>
            <div class="probabilities" id="probabilities"></div>
        </div>
        
        <div id="error" class="error" style="display: none;"></div>
        
        <div class="disclaimer">
            <p><strong>Disclaimer:</strong> Predictions may not be accurate due to model limitations, potential overfitting, and limited training data. This tool is for educational purposes only and should not be used as the sole basis for determining whether content is AI-generated or human-made.</p>
        </div>
    </div>

    <script>
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const clearBtn = document.getElementById('clearBtn');
        const loading = document.getElementById('loading');
        const result = document.getElementById('result');
        const error = document.getElementById('error');
        const previewImage = document.getElementById('previewImage');
        const previewContainer = document.getElementById('previewContainer');
        const notification = document.getElementById('notification');
        const prediction = document.getElementById('prediction');
        const confidence = document.getElementById('confidence');
        const probabilities = document.getElementById('probabilities');

        let selectedFile = null;

        // File upload handling
        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('dragleave', handleDragLeave);
        uploadArea.addEventListener('drop', handleDrop);
        fileInput.addEventListener('change', handleFileSelect);

        function handleDragOver(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        }

        function handleFileSelect(e) {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        }

        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                showError('Please select a valid image file.');
                return;
            }

            selectedFile = file;
            analyzeBtn.disabled = false;
            clearBtn.style.display = 'inline-block';
            
            // Show preview immediately
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImage.src = e.target.result;
                previewContainer.classList.add('show');
                // Show success notification
                showNotification();
            };
            reader.readAsDataURL(file);
            
            hideError();
            hideResult();
        }

        function showNotification() {
            notification.classList.add('show');
            // Auto-hide after 4 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Analyze button
        analyzeBtn.addEventListener('click', analyzeImage);
        clearBtn.addEventListener('click', clearAll);

        async function analyzeImage() {
            if (!selectedFile) return;

            showLoading();
            hideError();
            hideResult();

            const formData = new FormData();
            formData.append('image', selectedFile);

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Analysis failed');
                }

                showResult(data);
            } catch (err) {
                showError(err.message);
            } finally {
                hideLoading();
            }
        }

        function showResult(data) {
            const { predicted_class, confidence, probabilities: probs } = data;
            
            prediction.textContent = `Predicted: ${predicted_class}`;
            prediction.className = `prediction ${predicted_class.toLowerCase()}-result`;
            
            confidence.textContent = `Confidence: ${(confidence * 100).toFixed(1)}%`;
            
            // Create probability bars
            probabilities.innerHTML = '';
            Object.entries(probs).forEach(([label, prob]) => {
                const item = document.createElement('div');
                item.className = 'prob-item';
                item.innerHTML = `
                    <div class="prob-label">${label}</div>
                    <div class="prob-bar">
                        <div class="prob-fill" style="width: ${prob * 100}%"></div>
                    </div>
                    <div class="prob-value">${(prob * 100).toFixed(1)}%</div>
                `;
                probabilities.appendChild(item);
            });
            
            result.classList.add('show');
        }

        function showLoading() {
            loading.style.display = 'block';
            analyzeBtn.disabled = true;
        }

        function hideLoading() {
            loading.style.display = 'none';
            analyzeBtn.disabled = false;
        }

        function showError(message) {
            error.textContent = message;
            error.style.display = 'block';
        }

        function hideError() {
            error.style.display = 'none';
        }

        function hideResult() {
            result.classList.remove('show');
        }

        function clearAll() {
            selectedFile = null;
            fileInput.value = '';
            analyzeBtn.disabled = true;
            clearBtn.style.display = 'none';
            previewContainer.classList.remove('show');
            hideResult();
            hideError();
        }
    </script>
</body>
</html>
